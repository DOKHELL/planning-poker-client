import{r as l,d as b,c as u,j as a,a as h,e as T,i as x,B as N,F as f,f as k,g as y,h as P,k as G,l as L,m as I,s as R,G as V,n as $,o as w,P as W,p as z}from"./index.4e63dfed.js";const F="_gamePlayer_12sff_2",j="_observer_12sff_7",A="_gamePlayerImg_12sff_7",M="_showResult_12sff_24",X="_active_12sff_24",E="_gamePlayerPhoto_12sff_53",O="_gamePlayerWrapper_12sff_67",H="_gamePlayerName_12sff_102",g={gamePlayer:F,observer:j,gamePlayerImg:A,showResult:M,active:X,gamePlayerPhoto:E,gamePlayerWrapper:O,gamePlayerName:H},q=({user:s})=>{const{showResult:e}=b(),c=u(g.gamePlayer,s.observer?g.observer:"",s.card?g.active:"",e?g.showResult:"");return a("div",{className:c,children:h("div",{className:g.gamePlayerWrapper,children:[h("div",{className:g.gamePlayerImg,children:[s.photo?a("img",{className:g.gamePlayerPhoto,src:s.photo,alt:"photo"}):"",e&&s.card?a("span",{children:s.card}):""]}),a("div",{className:g.gamePlayerName,children:s.username})]})})},C=l.exports.memo(q),D=()=>{const{id:s}=T(),{showResult:e}=b(),c=()=>{k(s)};return x()&&!e?a(N,{text:"Reveal cards",onClick:c}):e?a(N,{text:"Start new voting",onClick:c}):a(f,{children:"Pick your cards!"})},J="_gameTable_rmbz6_1",K="_gameTableSide_rmbz6_25",Q="_gameTableTop_rmbz6_32",Y="_gameTableLeft_rmbz6_45",Z="_gameTableCenter_rmbz6_56",U="_gameTableRight_rmbz6_80",aa="_gameTableBottom_rmbz6_90",m={gameTable:J,gameTableSide:K,gameTableTop:Q,gameTableLeft:Y,gameTableCenter:Z,gameTableRight:U,gameTableBottom:aa},ea=()=>{const{users:s=[]}=b(),e=(s==null?void 0:s.filter(i=>i.active))||[],c=0,r=Math.ceil((e==null?void 0:e.length)*.3),d=r,n=r+r,S=n,t=Math.ceil(((e==null?void 0:e.length)-(n+1))/2)+n,_=t,p=(e==null?void 0:e.length)-t+t;return h("div",{className:m.gameTable,children:[a("div",{}),a("div",{className:u(m.gameTableTop,m.gameTableSide),children:e.slice(d,n).map(i=>a(C,{user:i},i.userId))}),a("div",{}),a("div",{className:u(m.gameTableLeft,m.gameTableSide),children:e.slice(S,t).map(i=>a(C,{user:i},i.userId))}),a("div",{className:u(m.gameTableCenter,m.gameTableSide),children:a(D,{})}),a("div",{className:u(m.gameTableRight,m.gameTableSide),children:e.slice(_,p).map(i=>a(C,{user:i},i.userId))}),a("div",{}),a("div",{className:u(m.gameTableBottom,m.gameTableSide),children:e.slice(c,r).map(i=>a(C,{user:i},i.userId))}),a("div",{})]})},ta=l.exports.memo(ea),sa="_gameStatistic_1k3ub_1",ca="_gameStatisticList_1k3ub_10",ia="_gameStatisticItem_1k3ub_19",ra="_gameStatisticBarContainer_1k3ub_25",ma="_gameStatisticBar_1k3ub_25",oa="_gameStatisticBarFill_1k3ub_40",na="_gameStatisticCardContainer_1k3ub_49",la="_gameStatisticCardSpacer_1k3ub_56",ga="_gameStatisticValue_1k3ub_60",da="_gameStatisticCardSpacerXL_1k3ub_74",_a="_gameStatisticVotes_1k3ub_78",ua="_mostVoted_1k3ub_83",o={gameStatistic:sa,gameStatisticList:ca,gameStatisticItem:ia,gameStatisticBarContainer:ra,gameStatisticBar:ma,gameStatisticBarFill:oa,gameStatisticCardContainer:na,gameStatisticCardSpacer:la,gameStatisticValue:ga,gameStatisticCardSpacerXl:da,gameStatisticVotes:_a,mostVoted:ua},ha=()=>{var S;const{users:s=[]}=b(),e=(S=s==null?void 0:s.map(t=>t.card))==null?void 0:S.filter(t=>Number(t)),c=(e==null?void 0:e.reduce((t,_)=>(t[_]=(t[_]||0)+1,t),{}))||{},r=Math.max(...Object.values(c))||0,d=Object.keys(c),n=t=>c[t]*100/r;return a("div",{className:o.gameStatistic,children:a("ul",{className:o.gameStatisticList,children:d.map(t=>a("li",{className:n(t)===100?o.mostVoted:"",children:h("div",{className:o.gameStatisticItem,children:[a("div",{className:o.gameStatisticBarContainer,children:a("div",{className:o.gameStatisticBar,children:a("div",{className:o.gameStatisticBarFill,style:{height:`${n(t)}%`}})})}),h("div",{className:o.gameStatisticCardContainer,children:[a("div",{className:o.gameStatisticCardSpacer}),a("div",{className:o.gameStatisticValue,children:t}),h("div",{className:o.gameStatisticVotes,children:[c[t]," ",c[t]<2?"Vote":"Votes"]})]})]})},t))})})},Sa=l.exports.memo(ha),ba="_gameCardsList_1uc87_1",pa="_active_1uc87_14",Ca="_gameCardsButton_1uc87_14",va="_gameCardsCard_1uc87_22",v={gameCardsList:ba,active:pa,gameCardsButton:Ca,gameCardsCard:va},Pa=()=>{const{id:s}=T(),[e]=y(P.auth),{users:c=[],userData:r}=b(),d=["1","2","3","5","8","13","21","34","55","89","?"],n=t=>{G(s,t,e==null?void 0:e.uid)},S=t=>{var p;return(((p=c.find(i=>i.userId===(e==null?void 0:e.uid)))==null?void 0:p.card)||"")===t?v.active:""};return a("div",{className:v.gameCardsList,children:r!=null&&r.observer?null:d.map((t,_)=>a("div",{className:v.gameCardsCard,onClick:()=>n(t),children:a("button",{className:u(v.gameCardsButton,S(t)),children:a("span",{children:t})})},_))})},Ta=l.exports.memo(Pa),fa=()=>{const{showResult:s}=b();return a(f,{children:s?a(Sa,{}):a(Ta,{})})},ya=l.exports.memo(fa),Na="_gamePage_znvlx_1",Ba="_gamePageTableWrapper_znvlx_7",B={gamePage:Na,gamePageTableWrapper:Ba},xa=()=>{const{id:s}=T(),[e]=y(P.auth),c=async()=>{const r=new V,{user:d}=await $(P.auth,r);d&&w()};return l.exports.useEffect(()=>{e?L(s,e):(I(s),R({variant:"success",title:"Please first login to play",canClose:!1,maxWidth:740,onConfirm:c,confirmBtnText:"Login By Google"}))},[e]),h(f,{children:[a("div",{className:B.gamePageTableWrapper,children:a(ta,{})}),a(ya,{})]})},ka=l.exports.memo(xa),Ga=()=>{const[,s]=y(P.auth);return l.exports.useEffect(()=>()=>{console.log("Disconnected"),z("leave")},[]),s?a(W,{}):a("div",{className:B.gamePage,children:a(ka,{})})},Ia=l.exports.memo(Ga);export{Ia as default};
