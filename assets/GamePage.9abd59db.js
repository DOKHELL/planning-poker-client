import{r as g,b as S,c as h,j as a,a as u,d as T,i as x,B as N,F as y,e as k,f,g as P,h as G,k as L,l as I,s as R,G as V,m as $,n as w,P as W}from"./index.8d9c6e59.js";const z="_gamePage_znvlx_1",F="_gamePageTableWrapper_znvlx_7",B={gamePage:z,gamePageTableWrapper:F},j="_gamePlayer_12sff_2",A="_observer_12sff_7",M="_gamePlayerImg_12sff_7",X="_showResult_12sff_24",O="_active_12sff_24",E="_gamePlayerPhoto_12sff_53",H="_gamePlayerWrapper_12sff_67",q="_gamePlayerName_12sff_102",l={gamePlayer:j,observer:A,gamePlayerImg:M,showResult:X,active:O,gamePlayerPhoto:E,gamePlayerWrapper:H,gamePlayerName:q},J=({user:s})=>{const{showResult:e}=S(),c=h(l.gamePlayer,s.observer?l.observer:"",s.card?l.active:"",e?l.showResult:"");return a("div",{className:c,children:u("div",{className:l.gamePlayerWrapper,children:[u("div",{className:l.gamePlayerImg,children:[s.photo?a("img",{className:l.gamePlayerPhoto,src:s.photo,alt:"photo"}):"",e&&s.card?a("span",{children:s.card}):""]}),a("div",{className:l.gamePlayerName,children:s.username})]})})},C=g.exports.memo(J),K=()=>{const{id:s}=T(),{showResult:e}=S(),c=()=>{k(s)};return x()&&!e?a(N,{text:"Reveal cards",onClick:c}):e?a(N,{text:"Start new voting",onClick:c}):a(y,{children:"Pick your cards!"})},Q="_gameTable_rmbz6_1",Y="_gameTableSide_rmbz6_25",Z="_gameTableTop_rmbz6_32",D="_gameTableLeft_rmbz6_45",U="_gameTableCenter_rmbz6_56",aa="_gameTableRight_rmbz6_80",ea="_gameTableBottom_rmbz6_90",r={gameTable:Q,gameTableSide:Y,gameTableTop:Z,gameTableLeft:D,gameTableCenter:U,gameTableRight:aa,gameTableBottom:ea},ta=()=>{const{users:s=[]}=S(),e=(s==null?void 0:s.filter(i=>i.active))||[],c=0,m=Math.ceil((e==null?void 0:e.length)*.3),d=m,n=m+m,b=n,t=Math.ceil(((e==null?void 0:e.length)-(n+1))/2)+n,_=t,p=(e==null?void 0:e.length)-t+t;return u("div",{className:r.gameTable,children:[a("div",{}),a("div",{className:h(r.gameTableTop,r.gameTableSide),children:e.slice(d,n).map(i=>a(C,{user:i},i.userId))}),a("div",{}),a("div",{className:h(r.gameTableLeft,r.gameTableSide),children:e.slice(b,t).map(i=>a(C,{user:i},i.userId))}),a("div",{className:h(r.gameTableCenter,r.gameTableSide),children:a(K,{})}),a("div",{className:h(r.gameTableRight,r.gameTableSide),children:e.slice(_,p).map(i=>a(C,{user:i},i.userId))}),a("div",{}),a("div",{className:h(r.gameTableBottom,r.gameTableSide),children:e.slice(c,m).map(i=>a(C,{user:i},i.userId))}),a("div",{})]})},sa=g.exports.memo(ta),ca="_gameStatistic_1k3ub_1",ia="_gameStatisticList_1k3ub_10",ma="_gameStatisticItem_1k3ub_19",ra="_gameStatisticBarContainer_1k3ub_25",oa="_gameStatisticBar_1k3ub_25",na="_gameStatisticBarFill_1k3ub_40",la="_gameStatisticCardContainer_1k3ub_49",ga="_gameStatisticCardSpacer_1k3ub_56",da="_gameStatisticValue_1k3ub_60",_a="_gameStatisticCardSpacerXL_1k3ub_74",ha="_gameStatisticVotes_1k3ub_78",ua="_mostVoted_1k3ub_83",o={gameStatistic:ca,gameStatisticList:ia,gameStatisticItem:ma,gameStatisticBarContainer:ra,gameStatisticBar:oa,gameStatisticBarFill:na,gameStatisticCardContainer:la,gameStatisticCardSpacer:ga,gameStatisticValue:da,gameStatisticCardSpacerXl:_a,gameStatisticVotes:ha,mostVoted:ua},ba=()=>{var b;const{users:s=[]}=S(),e=(b=s==null?void 0:s.map(t=>t.card))==null?void 0:b.filter(t=>Number(t)),c=(e==null?void 0:e.reduce((t,_)=>(t[_]=(t[_]||0)+1,t),{}))||{},m=Math.max(...Object.values(c))||0,d=Object.keys(c),n=t=>c[t]*100/m;return a("div",{className:o.gameStatistic,children:a("ul",{className:o.gameStatisticList,children:d.map(t=>a("li",{className:n(t)===100?o.mostVoted:"",children:u("div",{className:o.gameStatisticItem,children:[a("div",{className:o.gameStatisticBarContainer,children:a("div",{className:o.gameStatisticBar,children:a("div",{className:o.gameStatisticBarFill,style:{height:`${n(t)}%`}})})}),u("div",{className:o.gameStatisticCardContainer,children:[a("div",{className:o.gameStatisticCardSpacer}),a("div",{className:o.gameStatisticValue,children:t}),u("div",{className:o.gameStatisticVotes,children:[c[t]," ",c[t]<2?"Vote":"Votes"]})]})]})},t))})})},Sa=g.exports.memo(ba),pa="_gameCardsList_1uc87_1",Ca="_active_1uc87_14",va="_gameCardsButton_1uc87_14",Pa="_gameCardsCard_1uc87_22",v={gameCardsList:pa,active:Ca,gameCardsButton:va,gameCardsCard:Pa},Ta=()=>{const{id:s}=T(),[e]=f(P.auth),{users:c=[],userData:m}=S(),d=["1","2","3","5","8","13","21","34","55","89","?"],n=t=>{G(s,t,e==null?void 0:e.uid)},b=t=>{var p;return(((p=c.find(i=>i.userId===(e==null?void 0:e.uid)))==null?void 0:p.card)||"")===t?v.active:""};return a("div",{className:v.gameCardsList,children:m!=null&&m.observer?null:d.map((t,_)=>a("div",{className:v.gameCardsCard,onClick:()=>n(t),children:a("button",{className:h(v.gameCardsButton,b(t)),children:a("span",{children:t})})},_))})},ya=g.exports.memo(Ta),fa=()=>{const{showResult:s}=S();return a(y,{children:s?a(Sa,{}):a(ya,{})})},Na=g.exports.memo(fa),Ba=()=>{const{id:s}=T(),[e]=f(P.auth),c=async()=>{const m=new V,{user:d}=await $(P.auth,m);d&&w()};return g.exports.useEffect(()=>{e?L(s,e):(I(s),R({variant:"success",title:"Please first login to play",canClose:!1,maxWidth:740,onConfirm:c,confirmBtnText:"Login By Google"}))},[e]),u(y,{children:[a("div",{className:B.gamePageTableWrapper,children:a(sa,{})}),a(Na,{})]})},xa=g.exports.memo(Ba),ka=()=>{const[,s]=f(P.auth);return s?a(W,{}):a("div",{className:B.gamePage,children:a(xa,{})})},La=g.exports.memo(ka);export{La as default};
